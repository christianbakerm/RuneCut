<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RuneCut — Incremental</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="brand">Rune<b>Cut</b> · <span class="muted">Incremental</span></div>
    <div class="row">
      <button id="saveBtn" class="btn-success">Save</button>
      <button id="resetBtn" class="btn-danger">Reset</button>
      <span class="pill" title="Autosaves every 30s"><span>💾</span> Autosave <b>ON</b></span>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <!-- LEFT: Skills + Inventory -->
      <section class="card" id="skillsCard">
        <h2>🧭 Skills</h2>
        <div class="row" style="gap:8px; margin-bottom:8px;">
          <div class="stat"><span>Total</span> <b id="totalLevel">4</b></div>
          <div class="stat"><span>Gold</span> <b class="gold" id="gold">0</b></div>
        </div>

        <!-- Compact skills grid (single source of truth) -->
        <div class="skills-grid">
          <div class="skill-tile" id="tile-wc">
            <div class="tile-header">🪓 <span>Forrestry</span></div>
            <div class="tile-level">Lvl <b id="wcLevelMini">1</b></div>
            <div class="progress xs" title=""><div class="bar" id="wcBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-craft">
            <div class="tile-header">🪚 <span>Crafting</span></div>
            <div class="tile-level">Lvl <b id="craftLevelMini">1</b></div>
            <div class="progress xs"><div class="bar" id="craftBarMini"></div></div>
          </div>          
          <div class="skill-tile" id="tile-min">
            <div class="tile-header">⛏️ <span>Mining</span></div>
            <div class="tile-level">Lvl <b id="minLevelMini">1</b></div>
            <div class="progress xs"><div class="bar" id="minBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-smith">
            <div class="tile-header">⚒️ <span>Smithing</span></div>
            <div class="tile-level">Lvl <b id="smithLevelMini">1</b></div>
            <div class="progress xs"><div class="bar" id="smithBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-fish">
            <div class="tile-header">🎣 <span>Fishing</span></div>
            <div class="tile-level">Lvl <b id="fishLevelMini">1</b></div>
            <div class="progress xs"><div class="bar" id="fishBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-cook">
            <div class="tile-header">🍳 <span>Cooking</span></div>
            <div class="tile-level">Lvl <b id="cookLevelMini">1</b></div>
            <div class="progress xs"><div class="bar" id="cookBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-atk">
            <div class="tile-header">⚔️ <span>Attack</span></div>
            <div class="tile-level">Lvl <b id="atkLevelMini">1</b></div>
            <div class="progress xs" title=""><div class="bar" id="atkBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-str">
            <div class="tile-header">💪 <span>Strength</span></div>
            <div class="tile-level">Lvl <b id="strLevelMini">1</b></div>
            <div class="progress xs" title=""><div class="bar" id="strBarMini"></div></div>
          </div>
          <div class="skill-tile" id="tile-def">
            <div class="tile-header">🛡️ <span>Defense</span></div>
            <div class="tile-level">Lvl <b id="defLevelMini">1</b></div>
            <div class="progress xs" title=""><div class="bar" id="defBarMini"></div></div>
          </div>
        </div>

        <div class="divider"></div>
        <h2>🎒 Inventory</h2>
        <div id="inventory" class="inventory"></div>
      </section>

      <!-- MIDDLE: Areas (Forests + Fishing + Cooking + Mining + Combat) -->
      <section class="card" id="areasCard">
        <div class="tabs">
          <button class="tab active" data-tab="forests">🌲 Forests</button>
          <button class="tab" data-tab="fishing">🎣 Fishing</button>
          <button class="tab" data-tab="cooking">🍳 Cooking</button>
          <button class="tab" data-tab="mining">⛏️ Mining</button>
          <button class="tab" data-tab="smithing">⚒️ Smithing</button>
          <button class="tab" data-tab="combat">⚔️ Combat Areas</button>
        </div>

        <!-- Forests panel -->
        <div class="tabpanel" id="tab-forests">
          <h2>🌲 Chop Trees</h2>
          <div class="row" style="gap:10px; margin-bottom:10px;">
            <label class="muted" for="treeSelect">Tree</label>
            <select id="treeSelect"></select>
            <button id="chopBtn" class="btn-primary">Chop</button>
          </div>
          <div class="progress" style="margin-bottom:10px;">
            <div class="bar" id="actionBar"></div>
            <div class="label" id="actionLabel">Idle</div>
          </div>

          <div class="cols-2">
            <div class="card" style="padding:10px;">
              <h2 style="margin-bottom:6px;">🛒 Shop</h2>
              <div id="shop" class="shop"></div>
            </div>
            <div class="card" style="padding:10px;">
              <h2 style="margin-bottom:6px;">📜 Log</h2>
              <div id="log" class="log" aria-live="polite"></div>
            </div>
          </div>
        </div>

        <!-- Fishing panel -->
        <div class="tabpanel hidden" id="tab-fishing">
          <h2>🎣 Fishing</h2>
          <div class="row" style="gap:10px; margin-bottom:10px;">
            <label class="muted" for="spotSelect">Spot</label>
            <select id="spotSelect"></select>
            <button id="fishBtn" class="btn-primary">Fish</button>
          </div>
          <div class="progress" style="margin-bottom:10px;">
            <div class="bar" id="fishBar"></div>
            <div class="label" id="fishLabel">Idle</div>
          </div>
          <div class="card" style="padding:10px;">
            <h2 style="margin-bottom:6px;">📜 Log</h2>
            <div id="fishLog" class="log" aria-live="polite"></div>
          </div>
        </div>

        <!-- Cooking panel -->
        <div class="tabpanel hidden" id="tab-cooking">
          <h2>🍳 Cooking</h2>
          <p class="small muted">
            Drag a <b>raw food</b> from your inventory onto the fire and hold it.
            Release when the bar is in the <b>golden zone</b>. Too short = raw. Too long = burnt.
          </p>

          <div id="cookFire" class="cook-fire" aria-dropeffect="move">
            <div class="cook-bar">
              <div class="perfect-zone" id="cookPerfectZone"></div>
              <div class="bar" id="cookBar"></div>
            </div>
            <div class="fire-emoji">🔥</div>
            <div class="hint" id="cookHint">Drop raw food here</div>
          </div>

          <div id="cookLog" class="log" aria-live="polite"></div>
        </div>


        <!-- Mining panel -->
        <div class="tabpanel hidden" id="tab-mining">
          <h2>⛏️ Mining</h2>
          <div class="row" style="gap:10px; margin-bottom:10px;">
            <label class="muted" for="rockSelect">Rock</label>
            <select id="rockSelect"></select>
            <button id="mineBtn" class="btn-primary">Mine</button>
          </div>
          <div class="progress" style="margin-bottom:10px;">
            <div class="bar" id="mineBar"></div>
            <div class="label" id="mineLabel">Idle</div>
          </div>
          <div class="card" style="padding:10px;">
            <h2 style="margin-bottom:6px;">📜 Log</h2>
            <div id="mineLog" class="log" aria-live="polite"></div>
          </div>
        </div>

        <!-- Smithing panel -->
        <div class="tabpanel hidden" id="tab-smithing">
          <h2>⚒️ Smithing</h2>

          <!-- Smelting -->
          <div class="card" style="padding:10px; margin-bottom:10px;">
            <h3 style="margin:0 0 8px;">🔥 Smelting</h3>
            <div class="row" style="gap:10px; margin-bottom:8px;">
              <span class="pill">Copper Ore: <b id="oreCopperCount">0</b></span>
              <span class="pill">Copper Bars: <b id="copperBarCount">0</b></span>
              <button id="smeltOneBtn" class="btn-primary" data-smelt="bar_copper">Smelt 1</button>
              <button id="smeltAllBtn" class="btn-primary" data-smelt="bar_copper">Smelt All</button>
            </div>
            <div class="progress" style="margin-bottom:8px;">
              <div class="bar" id="smithBar"></div>
              <div class="label" id="smithLabel">Idle</div>
            </div>
            <div id="smithLog" class="log" aria-live="polite"></div>
          </div>

          <!-- Upgrade Copper Gear -->
          <div class="card" style="padding:10px; margin-bottom:10px;">
            <h3 style="margin:0 0 8px;">🛠️ Upgrade Copper Gear</h3>
            <p class="small muted">Uses <b>1× Copper Upgrade Bar</b> to raise quality by <b>+10–25%</b> (higher Smithing skews higher).</p>
            <div class="row" style="gap:8px; margin-bottom:8px;">
              <span class="pill">Upgrade Bars: <b id="upgradeBarCount">0</b></span>
              <select id="upgradeTarget"></select>
              <button id="applyUpgradeBtn" class="btn-success">Apply</button>
            </div>
          </div>

          <!-- Forging (gear + materials) -->
          <div class="card" style="padding:10px;">
            <h3 style="margin:0 0 8px;">🛡️ Forge Copper Gear & Materials</h3>
            <p class="small muted" style="margin-top:-4px;">Includes <b>Copper Upgrade Bar</b> (3× Copper Bar → 1). Select below:</p>
            <div id="forgeList" class="shop"></div>
          </div>
        </div>


        <!-- Combat panel (TURN-BASED) -->
        <div class="tabpanel hidden" id="tab-combat">
          <h2>⚔️ Combat</h2>
          <div class="row" style="gap:10px; margin-bottom:10px;">
            <label class="muted" for="monsterSelect">Monster</label>
            <select id="monsterSelect"></select>
            <label class="muted" for="trainingSelect">Style</label>
            <select id="trainingSelect">
              <option value="attack">Attack</option>
              <option value="strength">Strength</option>
              <option value="defense">Defense</option>
              <option value="shared" selected>Shared</option>
            </select>
            <button id="fightBtn" class="btn-primary">Start Fight</button>
            <button id="attackTurnBtn" class="btn-primary" disabled>Attack</button>
            <button id="fleeBtn" class="btn-danger" disabled>Flee</button>
          </div>

          <!-- Monster Card -->
          <div class="monster-card" id="monsterCard">
            <img id="monsterImg" class="monster-img" alt="Monster" />
            <div class="monster-meta">
              <div class="monster-title">
                <span id="monsterCardName">—</span>
                <span class="muted">Lv <b id="monsterCardLevel">—</b></span>
              </div>
              <div class="monster-stats small muted" id="monsterCardStats">HP — · Atk — · Def — · Max —</div>
            </div>
          </div>

          <div class="combat-hud">
            <div class="hud-col">
              <div class="hud-name">You</div>
              <div class="progress hp"><div class="bar" id="playerHpBar"></div><div class="label" id="playerHpVal">0/0</div></div>
            </div>
            <div class="hud-col">
              <div class="hud-name" id="monName">—</div>
              <div class="progress hp enemy"><div class="bar" id="monHpBar"></div><div class="label" id="monHpVal">0/0</div></div>
            </div>
          </div>

          <div class="card" style="padding:10px; margin-top:10px;">
            <h3 class="small muted" style="margin:0 0 6px;">Combat Log</h3>
            <div id="combatLog" class="log" aria-live="polite"></div>
          </div>
        </div>
      </section>


      <!-- RIGHT: Equipment + Character -->
      <section class="card" id="equipmentCard">
        <h2>🧰 Equipment</h2>
        <!-- Compact equipment grid -->
        <div id="equipmentGrid" class="equip-grid">
          <div class="equip-cell" data-slot="head">
            <div class="slot empty"><span class="icon">🪖</span><button class="unequip-x" data-unequip="head" title="Unequip">✕</button></div>
            <div class="slot-label">Head</div>
          </div>
          <div class="equip-cell" data-slot="cape">
            <div class="slot empty"><span class="icon">🧣</span><button class="unequip-x" data-unequip="cape" title="Unequip">✕</button></div>
            <div class="slot-label">Cape</div>
          </div>
          <div class="equip-cell" data-slot="amulet">
            <div class="slot empty"><span class="icon">📿</span><button class="unequip-x" data-unequip="amulet" title="Unequip">✕</button></div>
            <div class="slot-label">Amulet</div>
          </div>

          <div class="equip-cell" data-slot="weapon">
            <div class="slot empty"><span class="icon">🗡️</span><button class="unequip-x" data-unequip="weapon" title="Unequip">✕</button></div>
            <div class="slot-label">Weapon</div>
          </div>
          <div class="equip-cell" data-slot="body">
            <div class="slot empty"><span class="icon">🧥</span><button class="unequip-x" data-unequip="body" title="Unequip">✕</button></div>
            <div class="slot-label">Body</div>
          </div>
          <div class="equip-cell" data-slot="shield">
            <div class="slot empty"><span class="icon">🛡️</span><button class="unequip-x" data-unequip="shield" title="Unequip">✕</button></div>
            <div class="slot-label">Shield</div>
          </div>

          <div class="equip-cell" data-slot="gloves">
            <div class="slot empty"><span class="icon">🧤</span><button class="unequip-x" data-unequip="gloves" title="Unequip">✕</button></div>
            <div class="slot-label">Gloves</div>
          </div>
          <div class="equip-cell" data-slot="legs">
            <div class="slot empty"><span class="icon">👖</span><button class="unequip-x" data-unequip="legs" title="Unequip">✕</button></div>
            <div class="slot-label">Legs</div>
          </div>
          <div class="equip-cell" data-slot="boots">
            <div class="slot empty"><span class="icon">🥾</span><button class="unequip-x" data-unequip="boots" title="Unequip">✕</button></div>
            <div class="slot-label">Boots</div>
          </div>

          <div class="equip-cell" data-slot="ring">
            <div class="slot empty"><span class="icon">💍</span><button class="unequip-x" data-unequip="ring" title="Unequip">✕</button></div>
            <div class="slot-label">Ring</div>
          </div>
          <div class="equip-cell" data-slot="axe">
            <div class="slot empty"><span class="icon">🪓</span><button class="unequip-x" data-unequip="axe" title="Unequip">✕</button></div>
            <div class="slot-label">Axe</div>
          </div>
          <div class="equip-cell" data-slot="pick">
            <div class="slot empty"><span class="icon">⛏️</span><button class="unequip-x" data-unequip="pick" title="Unequip">✕</button></div>
            <div class="slot-label">Pickaxe</div>
          </div>
          <div class="equip-cell spacer"></div>
        </div>

        <div class="divider"></div>
        <h2>🧙 Character</h2>
        <div class="row" style="gap:10px; margin-bottom:8px;">
          <div class="stat"><span>HP</span> <b id="charHpText">0/0</b></div>
          <div class="stat"><span>Atk</span> <b id="charAtk">0</b></div>
          <div class="stat"><span>Str</span> <b id="charStr">0</b></div>
          <div class="stat"><span>Def</span> <b id="charDef">0</b></div>
        </div>
        <div class="progress hp" title="Your HP"><div class="bar" id="charHpBar"></div><div class="label" id="charHpLabel">0%</div></div>
        <div class="row small" style="margin-top:8px;">
          <span class="pill">Max Hit: <b id="charMaxHit">1</b></span>
          <span class="pill">Accuracy vs Selected: <b id="charAcc">—</b></span>
          <span class="pill">Defense Bonus: <b id="charDefBonus">+0</b></span>
        </div>
      </section>
    </div>
    <footer>
      Notice: Game is in very early development.
    </footer>
  </div>
  <div id="popover" class="popover hidden" role="menu"></div>
  <div id="tooltip" class="tooltip hidden"></div>
  <script type="module" src="main.js"></script>
</body>
</html>