:root {
  --bg: #0f1220;
  --panel: #171a2b;
  --panel-2: #1e2237;
  --text: #e8ecff;
  --text-dim: #a9b0d3;
  --accent: #7aa2ff;
  --accent-2: #45d483;
  --danger: #ff6b6b;
  --gold: #ffd166;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; background: radial-gradient(1200px 800px at 20% 10%, #141834, #0d1020) no-repeat, var(--bg);
  color: var(--text); font: 15px/1.5 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
header {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  padding: 14px 18px; background: #0b0e1b80; backdrop-filter: blur(6px); position: sticky; top: 0; z-index: 9;
  border-bottom: 1px solid #1b2040;
}
.brand { font-weight: 800; letter-spacing: .2px; }
.brand b { color: var(--accent); }
.wrap { max-width: 1200px; margin: 0 auto; padding: 16px; }
.grid { display: grid; grid-template-columns: 280px 1fr 360px; gap: 16px; }
@media (max-width: 1100px) { .grid { grid-template-columns: 1fr; } }

.card { background: linear-gradient(180deg, var(--panel), var(--panel-2)); border: 1px solid #242a4f; border-radius: var(--radius); box-shadow: var(--shadow); padding: 14px; }
.card h2 { margin: 0 0 10px; font-size: 16px; letter-spacing: .3px; color: var(--text); }
.muted { color: var(--text-dim); }
.small { font-size: 12px; }
.row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.stat { background: #0e1230; border: 1px solid #252b54; padding: 8px 10px; border-radius: var(--radius-sm); display: inline-flex; align-items: center; gap: 8px; }
.stat b { color: var(--text); }

select, button, input[type="number"] {
  background: #0e132c; color: var(--text); border: 1px solid #2a3162; border-radius: 10px; padding: 8px 10px;
  font: inherit; outline: none; transition: .15s ease; 
}
button { cursor: pointer; }
button:hover { border-color: #3a4290; transform: translateY(-1px); }
button:disabled { opacity: .6; cursor: not-allowed; transform: none; }
.btn-primary { background: linear-gradient(180deg, #2330a5, #1b2688); border-color: #2e3ac9; }
.btn-success { background: linear-gradient(180deg, #1f8f5f, #15714b); border-color: #2ac985; }
.btn-danger { background: linear-gradient(180deg, #9b2d2d, #7c2121); border-color: #cf4a4a; }
.btn-gold { background: linear-gradient(180deg, #b4841a, #8e6a16); border-color: #f4c16e; color: #1b1204; }

.progress { height: 14px; background: #0b0f25; border: 1px solid #1f2652; border-radius: 999px; overflow: hidden; position: relative; }
.progress .bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), #87f4ff); transition: width .12s linear; }
.progress .label { position: absolute; inset: 0; display: grid; place-items: center; font-size: 12px; color: var(--text-dim); }
.progress.xs { height: 8px; }

/* Monster card (combat) */
.monster-card{
  display:grid;
  grid-template-columns: 96px 1fr;
  gap:12px;
  align-items:center;
  border:1px solid #2a3162;
  background:#0f1431;
  padding:10px;
  border-radius:12px;
  margin-bottom:10px;
}
.monster-img{
  width:96px; height:96px; object-fit:contain; border-radius:10px;
  background:#0b1028; border:1px solid #242a4f;
}
.monster-title{ font-weight:700; display:flex; align-items:center; gap:8px; }
.monster-stats{ margin-top:4px; }


/* HP bars */
.progress.hp { border-color:#3b2141; background:#160b1b; }
.progress.hp .bar { background: linear-gradient(90deg, #ff6b6b, #ffb3b3); }
.progress.hp.enemy { border-color:#34413b; background:#0c1610; }
.progress.hp.enemy .bar { background: linear-gradient(90deg, #6bff8e, #b3ffd0); }

.combat-hud { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
.hud-col { display:grid; gap:6px; }
.hud-name { font-weight:700; }

.cols-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.cols-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }

.pill { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 999px; border: 1px solid #2a3162; background: #0e132c; font-size: 12px; }

.inventory { display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; }

@media (max-width: 520px) {
  .inventory { grid-template-columns: repeat(2, 1fr); }
}

.item-card { background: #0f1431; border: 1px solid #2a3162; padding: 10px; border-radius: 12px; display: grid; gap: 8px; }
.item-card h3 { margin: 0; font-size: 14px; }

.shop { display: grid; grid-template-columns: 1fr; gap: 8px; }
.shop-item { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; border: 1px solid #2a3162; background: #0f1431; padding: 10px; border-radius: 12px; }

.log { height: 140px; overflow: auto; background: #0f1431; border: 1px solid #2a3162; border-radius: 12px; padding: 8px; font-family: var(--mono); }
.log p { margin: 0 0 6px; color: var(--text-dim); }
.gold { color: var(--gold); font-weight: 700; }
.accent { color: var(--accent); }

footer { margin-top: 10px; color: var(--text-dim); font-size: 12px; text-align: center; }
.kbd { font-family: var(--mono); background: #0e132c; border: 1px solid #2a3162; padding: 1px 6px; border-radius: 6px; }

/* Old list-style equipment slots (kept for backwards compat if present) */
.equip-slot { display: grid; grid-template-columns: 80px 1fr; gap: 10px; align-items: center; border: 1px dashed #394281; border-radius: 12px; padding: 10px; background: #0c1030; }
.equip-slot .label { color: var(--text-dim); font-size: 12px; }

/* Tabs */
.tabs { display:flex; gap:8px; margin-bottom:10px; }
.tab { padding:6px 10px; border-radius:999px; border:1px solid #2a3162; background:#0e132c; color:var(--text); font-weight:600; }
.tab.active { background: linear-gradient(180deg, #2330a5, #1b2688); border-color:#2e3ac9; }
.tabpanel.hidden { display:none; }

/* Sub-elements */
.divider { height: 12px; }

/* Skills grid */
.skills-grid { display:grid; grid-template-columns: repeat(2, 1fr); gap:8px; margin-top:8px; }
.skill-tile { background:#0f1431; border:1px solid #2a3162; border-radius:12px; padding:8px; }
.skill-tile .tile-header { display:flex; align-items:center; gap:6px; font-weight:700; margin-bottom:6px; }
.skill-tile .tile-level { font-size:12px; color:var(--text-dim); margin-bottom:4px; }

/* Equipment grid */
.equip-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.equip-cell { display: grid; gap: 6px; justify-items: center; }
.equip-cell .slot { position: relative; width: 72px; height: 72px; border: 1px dashed #394281; border-radius: 12px; display: grid; place-items: center; background: #0c1030; box-shadow: inset 0 0 0 1px #121739; }
.equip-cell .slot:hover { border-color: #6270d9; box-shadow: inset 0 0 0 1px #2b3aa0; }
.equip-cell .slot.empty .icon { opacity: .35; }
.equip-cell .icon { font-size: 28px; line-height: 1; }
.equip-cell .slot-label { font-size: 12px; color: var(--text-dim); text-align: center; }
.unequip-x { position: absolute; top: -8px; right: -8px; width: 22px; height: 22px; border-radius: 999px; border: 1px solid #2a3162; background: #0e132c; color: var(--text); font-weight: 700; display: none; align-items: center; justify-content: center; }
.equip-cell .slot.has-item .unequip-x { display: grid; }
.unequip-x:hover { border-color: #3a4290; }

/* items icons */
.icon-img{
  width:40px; height:40px;
  image-rendering:auto;
  display:block; pointer-events:none;
}
/* a bit larger inside equipment slots */
.equip-cell .slot .icon-img{ width:44px; height:44px; }


/* Compact inventory slots */
.inv-slot { position: relative; height: 96px; border:1px solid #2a3162; background: linear-gradient(180deg,#0f1431,#0b1028); border-radius:12px; display:grid; place-items:center; padding:6px; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease; box-shadow: inset 0 0 0 1px #121739; }
.inv-slot:hover { border-color:#4a56c7; box-shadow: inset 0 0 0 1px #2b3aa0, 0 6px 16px rgba(0,0,0,.25); transform: translateY(-1px); }
.inv-slot .icon { font-size:28px; line-height:1; filter: drop-shadow(0 1px 0 rgba(0,0,0,.25)); }

/* Quantity badge (top-right) */
.inv-slot .qty-badge{
  position:absolute; top:6px; right:6px;
  font-size:11px; padding:2px 6px; border-radius:999px;
  background:#0e132c; border:1px solid #2a3162; color:var(--text);
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
  z-index: 1;
}
.inv-slot .sell-btn {
  position:absolute; left:6px; bottom:6px;
  font-size:11px; padding:3px 6px; border-radius:999px;
  border:1px solid #2a3162; background:#0e132c; color:var(--text);
  opacity:0; transform: translateY(2px); transition:.12s ease;
  z-index: 2;
}
.inv-slot:hover .sell-btn { opacity:1; transform: translateY(0); }
.inv-slot.equip { cursor: pointer; }

/* Eat button (top-left) */
.inv-slot .use-btn{
  position:absolute; top:6px; left:6px;
  font-size:11px; padding:3px 6px; border-radius:999px;
  border:1px solid #2a3162; background:#0e132c; color:var(--text);
  opacity:0; transform: translateY(2px); transition:.12s ease;
  z-index: 2;
}
.inv-slot:hover .use-btn{ opacity:1; transform: translateY(0); }

/* Colorful hover: Sell = gold, Eat = green */
.inv-slot .sell-btn {
  transition: background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease, transform .12s ease;
}
.inv-slot .sell-btn:hover {
  background: linear-gradient(180deg, #b4841a, #8e6a16);
  border-color: #f4c16e;
  color: #1b1204;
  box-shadow: 0 2px 10px rgba(180,132,26,.35);
  transform: translateY(0); /* keep it crisp on hover */
}

.inv-slot .use-btn {
  transition: background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease, transform .12s ease;
}
.inv-slot .use-btn:hover {
  background: linear-gradient(180deg, #1f8f5f, #15714b);
  border-color: #2ac985;
  color: #e8ffef;
  box-shadow: 0 2px 10px rgba(42,201,133,.35);
  transform: translateY(0);
}

/* Keyboard focus (accessibility) */
.inv-slot .sell-btn:focus-visible {
  outline: 2px solid #f4c16e; outline-offset: 2px;
}
.inv-slot .use-btn:focus-visible {
  outline: 2px solid #2ac985; outline-offset: 2px;
}


/* Inventory popover */
.popover { position: fixed; z-index: 9999; min-width: 160px; background:#0f1431; border:1px solid #2a3162; border-radius:10px; box-shadow: var(--shadow); padding:8px; }
.popover.hidden { display:none; }
.popover .row { gap:6px; margin-top:6px; }
.popover button { font-size:12px; padding:4px 8px; }
.popover input[type="number"]{ width:70px; }

/* Tooltip */
.tooltip { position: fixed; z-index: 9999; max-width: 260px; background: #0f1431; border: 1px solid #2a3162; color: var(--text); padding: 8px 10px; border-radius: 10px; box-shadow: var(--shadow); pointer-events: none; transition: opacity .12s ease, transform .12s ease; font-size: 12px; }
.tooltip.hidden { opacity: 0; transform: translateY(-4px); }
.tooltip b { color: var(--text); }
.tooltip .muted { color: var(--text-dim); }

/* Cooking fire */
.cook-fire{
  position: relative;
  display:grid; place-items:center;
  height:140px; border:1px solid #2a3162; border-radius:12px;
  background: radial-gradient(300px 140px at 50% 120%, #21130f, #0f1431);
}
.cook-fire.dragging{ outline:2px dashed #87f4ff; outline-offset:-6px; }
.cook-bar{
  position:absolute; top:18px; left:18px; right:18px; height:16px;
  background:#0b0f25; border:1px solid #1f2652; border-radius:999px; overflow:hidden;
}
.cook-bar .bar{
  height:100%; width:0%; background:linear-gradient(90deg, #ffb454, #ffd166);
  transition: width .05s linear;
}
.cook-bar .perfect-zone{
  position:absolute; top:0; height:100%; background:rgba(122,162,255,.22);
  border-left:2px solid #7aa2ff; border-right:2px solid #7aa2ff;
}
.cook-fire .fire-emoji{ font-size:44px; filter: drop-shadow(0 2px 8px rgba(255,140,0,.4)); }
.cook-fire .hint{ position:absolute; bottom:12px; color: var(--text-dim); font-size:12px; }

.chip {
  padding: 4px 10px; border-radius: 999px; border:1px solid #2a3162;
  background:#0e132c; color:var(--text); font-weight:600; cursor:pointer;
}
.chip:hover { border-color:#3a4290; transform: translateY(-1px); }
.chip.active {
  background: linear-gradient(180deg, #2330a5, #1b2688);
  border-color:#2e3ac9;
}
